<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Testing TempicoLabs SDK</title>
</head>
<body>
  <script src="../../dist/tmlabs.min.js"></script>
  <script>

//    var command = new TmLabs.FetchCommand({
//      method: 'ip'
//    });
//    command.on('error', function(error, command){
//      console.log('error', error);
//    });
//    command.on('response', function(response, command){
//      console.log('response', response);
//      console.log('balanceRemaining', command.balanceRemaining);
//    });
//    command.run({
//      ip: '127',
//    });
//    command.run({
//      ip: '127.0.0.2',
//    });
    console.log(TmLabs)
    var TmLabs = new TmLabs.default();
    TmLabs.on('error', function(error, command){
      console.error('[ SDK ERROR ]', error);
    });
    TmLabs.on('response', function(command, response){
      console.info('response', response);
      console.log('balanceRemaining', command.balanceRemaining); // return Remaining Balance
    });
    TmLabs.on('command', function(args, command){
      console.log('history', TmLabs.history) // get array of one completed commands
    });
    TmLabs.fetch('dns', {
      domain: 'google.com'
    }).then(function(answer){
      var ip = answer.content[Object.keys(answer.content)[0]];// because response will be in 'google.com' key
      console.log('History after DNS command', TmLabs.history) // get array of one completed command
      return TmLabs.fetch('ip', {
        ip: ip
      })
    }).then(function(answer){
      console.info('google ip info', answer.content) // get info about google ip address
      console.log('History after IP command', TmLabs.history) // get array of two completed commands
    });
    console.log('History with pending requests', TmLabs.history) // get array of two pending commands
  </script>
</body>
</html>
